<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:controls="clr-namespace:RedFocus.Controls"
         xmlns:converters="clr-namespace:RedFocus.Converters">
    <converters:TimeSpanToDoubleConverter x:Key="timeSpanToDoubleConverter" />
    <converters:TimeSpanToMMSSConverter x:Key="timeSpanToMMSSConverter" />
    <Style x:Key="ModernSliderThumbStyle" TargetType="{x:Type Thumb}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid Background="Transparent">
                        <Ellipse x:Name="Dot" Width="20" Height="20" 
                                 Fill="#007ACC" />
                    </Grid>
                    <ControlTemplate.Triggers>
                   <!--
                        <Trigger Property="IsDragging"  Value="True">
                            <Setter TargetName="Dot" Property="Width" Value="22"/>
                            <Setter TargetName="Dot" Property="Height" Value="22"/>
                        </Trigger>
                        -->
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="ModernSliderStyle" TargetType="{x:Type Slider}">
        <Setter Property="IsMoveToPointEnabled" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Slider}">
                    <Grid VerticalAlignment="Center">
                        <Track x:Name="PART_Track">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.DecreaseLarge}" Background="Transparent" BorderBrush="Transparent" Foreground="Transparent">
                                    <RepeatButton.Style>
                                        <Style TargetType="RepeatButton">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="RepeatButton">
                                                        <Border Height="4" Background="Pink" VerticalAlignment="Center"/>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </RepeatButton.Style>
                                </RepeatButton>
                            </Track.DecreaseRepeatButton>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.IncreaseLarge}" Background="Transparent" BorderBrush="Transparent" Foreground="Transparent">
                                    <RepeatButton.Style>
                                        <Style TargetType="RepeatButton">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="RepeatButton">
                                                        <Border Height="4" Background="Gray" VerticalAlignment="Center"/>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </RepeatButton.Style>
                                </RepeatButton>
                            </Track.IncreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb Style="{StaticResource ModernSliderThumbStyle}" VerticalAlignment="Center"/>
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="{x:Type controls:TimeIntervalSlider}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:TimeIntervalSlider}">
                    <StackPanel x:Name="Container">
                        <TextBlock Text="{TemplateBinding Title}" Foreground="{TemplateBinding TitleBrush}"
                    FontSize="{TemplateBinding TitleFontSize}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock Padding="2" Margin="0,10,0,0" Background="{TemplateBinding TimeIntervalTextBackgroundBrush}" 
                                   Foreground="{TemplateBinding TimeIntervalTextBrush}" FontSize="{TemplateBinding TimeIntervalTextFontSize}"
                                   Text="{TemplateBinding TimeInterval,Converter={ StaticResource timeSpanToMMSSConverter}}" HorizontalAlignment="Center" 
                                   Typography.SlashedZero="True" FontFamily="Consolas"
                                   />
                        <Slider Margin="0,10,0,0" HorizontalAlignment="Stretch" 
                                Value="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=TimeInterval, Converter={StaticResource timeSpanToDoubleConverter},Mode=TwoWay}" 
                                Maximum="{TemplateBinding MaxTimeInterval, Converter={StaticResource timeSpanToDoubleConverter}}"
                                Style="{StaticResource ModernSliderStyle}"
                                SmallChange="1"
                                TickFrequency="1"
                                IsSnapToTickEnabled="True"
                                >
                        </Slider>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type controls:TimeIntervalSlider}" x:Key="IntRoundsSlider">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:TimeIntervalSlider}">
                    <StackPanel x:Name="Container">
                        <TextBlock Text="{TemplateBinding Title}" Foreground="{TemplateBinding TitleBrush}"
                    FontSize="{TemplateBinding TitleFontSize}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock Padding="2" Margin="0,10,0,0" Background="{TemplateBinding TimeIntervalTextBackgroundBrush}" 
                                   Foreground="{TemplateBinding TimeIntervalTextBrush}" FontSize="{TemplateBinding TimeIntervalTextFontSize}"
                                   Text="{TemplateBinding TimeInterval,Converter={ StaticResource timeSpanToMMSSConverter}, ConverterParameter='Pure'}" HorizontalAlignment="Center" 
                                   Typography.SlashedZero="True" FontFamily="Consolas"
                                   />
                        <Slider Margin="0,10,0,0" HorizontalAlignment="Stretch" 
                                Value="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=TimeInterval, Converter={StaticResource timeSpanToDoubleConverter},Mode=TwoWay}" 
                                Maximum="{TemplateBinding MaxTimeInterval, Converter={StaticResource timeSpanToDoubleConverter}}"
                                Style="{StaticResource ModernSliderStyle}"
                                SmallChange="1"
                                TickFrequency="1"
                                IsSnapToTickEnabled="True"
                                >
                        </Slider>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
